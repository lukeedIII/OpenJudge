<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 500">
  <defs>
    <!-- Background Gradient -->
    <linearGradient id="bg-grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#0B0E14" />
      <stop offset="50%" stop-color="#151A22" />
      <stop offset="100%" stop-color="#090B10" />
    </linearGradient>

    <!-- Glass Box Gradient -->
    <linearGradient id="glass" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="rgba(255, 255, 255, 0.08)" />
      <stop offset="100%" stop-color="rgba(255, 255, 255, 0.02)" />
    </linearGradient>

    <!-- Glow Effects -->
    <filter id="glow-cyan" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="8" result="blur" />
      <feComposite in="SourceGraphic" in2="blur" operator="over" />
    </filter>
    
    <filter id="glow-magenta" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="8" result="blur" />
      <feComposite in="SourceGraphic" in2="blur" operator="over" />
    </filter>

    <filter id="glow-green" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="6" result="blur" />
      <feComposite in="SourceGraphic" in2="blur" operator="over" />
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1000" height="500" fill="url(#bg-grad)" rx="16" />
  
  <!-- Subtle Grid -->
  <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1" />
  </pattern>
  <rect width="1000" height="500" fill="url(#grid)" rx="16" />

  <!-- Title -->
  <text x="500" y="55" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#ffffff" text-anchor="middle" letter-spacing="2">V3 ENTERPRISE ARCHITECTURE</text>
  <text x="500" y="80" font-family="Arial, sans-serif" font-size="14" fill="#8892b0" text-anchor="middle" letter-spacing="1">BYOT SDK &amp; EVENT-DRIVEN TELEMETRY</text>

  <!-- Left Box: Enterprise Application -->
  <g transform="translate(50, 140)">
    <rect width="240" height="240" fill="url(#glass)" stroke="rgba(255,255,255,0.1)" stroke-width="1" rx="12" />
    <text x="120" y="40" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#00f0ff" text-anchor="middle" filter="url(#glow-cyan)">Your Enterprise App</text>
    <rect x="20" y="70" width="200" height="40" fill="rgba(0, 240, 255, 0.1)" stroke="#00f0ff" stroke-width="1" rx="6" />
    <text x="120" y="95" font-family="Consolas, monospace" font-size="14" fill="#e2e8f0" text-anchor="middle">Custom Tools (React/Py)</text>
    
    <rect x="20" y="130" width="200" height="40" fill="rgba(0, 240, 255, 0.1)" stroke="#00f0ff" stroke-width="1" rx="6" />
    <text x="120" y="155" font-family="Consolas, monospace" font-size="14" fill="#e2e8f0" text-anchor="middle">Observer UI Dashboard</text>
    
    <text x="120" y="210" font-family="Arial, sans-serif" font-size="12" fill="#8892b0" text-anchor="middle">Instantiates engine.py</text>
  </g>

  <!-- Center Box: OpenJudge V3 Engine -->
  <g transform="translate(380, 120)">
    <rect width="260" height="280" fill="url(#glass)" stroke="rgba(255, 0, 128, 0.3)" stroke-width="2" rx="16" />
    <text x="130" y="40" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ff0080" text-anchor="middle" filter="url(#glow-magenta)">OpenJudgeEngine</text>

    <!-- Internal Loop -->
    <path d="M 130 70 A 40 40 0 1 1 129.9 70" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="2" stroke-dasharray="6,4" />
    <text x="130" y="115" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">State Verification</text>
    
    <rect x="30" y="150" width="200" height="35" fill="rgba(255, 0, 128, 0.15)" stroke="#ff0080" stroke-width="1" rx="6" />
    <text x="130" y="173" font-family="Consolas, monospace" font-size="13" fill="#e2e8f0" text-anchor="middle">.register_tool()</text>

    <rect x="30" y="200" width="200" height="35" fill="rgba(255, 0, 128, 0.15)" stroke="#ff0080" stroke-width="1" rx="6" />
    <text x="130" y="223" font-family="Consolas, monospace" font-size="13" fill="#e2e8f0" text-anchor="middle">.stream_execute()</text>
    
    <text x="130" y="265" font-family="Arial, sans-serif" font-size="12" fill="#8892b0" text-anchor="middle">Mathematical Enforcement</text>
  </g>

  <!-- Right Box: LLM Gateway -->
  <g transform="translate(730, 160)">
    <rect width="220" height="200" fill="url(#glass)" stroke="rgba(46, 160, 67, 0.3)" stroke-width="1" rx="12" />
    <text x="110" y="40" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#2ea043" text-anchor="middle" filter="url(#glow-green)">LLM Gateway</text>
    
    <rect x="25" y="70" width="170" height="40" fill="rgba(46, 160, 67, 0.1)" stroke="#2ea043" stroke-width="1" rx="6" />
    <text x="110" y="95" font-family="Consolas, monospace" font-size="13" fill="#e2e8f0" text-anchor="middle">Dynamic XML Prompt</text>
    
    <rect x="25" y="130" width="170" height="40" fill="rgba(46, 160, 67, 0.1)" stroke="#2ea043" stroke-width="1" rx="6" />
    <text x="110" y="155" font-family="Consolas, monospace" font-size="13" fill="#e2e8f0" text-anchor="middle">GPT-4o Inference</text>
  </g>

  <!-- Arrows & Data Flow -->
  <!-- App -> Engine (Tools) -->
  <path d="M 290 180 L 370 180" fill="none" stroke="#00f0ff" stroke-width="3" stroke-linecap="round" marker-end="url(#arrow-cyan)" filter="url(#glow-cyan)" />
  <text x="330" y="170" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#00f0ff" text-anchor="middle">BYOT Injection</text>

  <!-- Engine -> App (Telemetry) -->
  <path d="M 370 230 L 290 230" fill="none" stroke="#ff0080" stroke-width="3" stroke-linecap="round" stroke-dasharray="8,4" marker-end="url(#arrow-magenta)" filter="url(#glow-magenta)" />
  <text x="330" y="250" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ff0080" text-anchor="middle">JSON SSE Stream</text>

  <!-- Engine <-> LLM -->
  <path d="M 640 200 L 720 200" fill="none" stroke="#2ea043" stroke-width="3" stroke-linecap="round" marker-end="url(#arrow-green)" filter="url(#glow-green)" />
  <text x="680" y="190" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2ea043" text-anchor="middle">Verify State</text>
  
  <path d="M 720 250 L 640 250" fill="none" stroke="#ffffff" stroke-width="3" stroke-linecap="round" stroke-dasharray="4,4" marker-end="url(#arrow-white)" />
  <text x="680" y="270" font-family="Arial, sans-serif" font-size="12" fill="#8892b0" text-anchor="middle">Extract XML</text>

  <!-- Arrow Markers -->
  <defs>
    <marker id="arrow-cyan" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#00f0ff" />
    </marker>
    <marker id="arrow-magenta" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#ff0080" />
    </marker>
    <marker id="arrow-green" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#2ea043" />
    </marker>
    <marker id="arrow-white" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#ffffff" />
    </marker>
  </defs>

</svg>
